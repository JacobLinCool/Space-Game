<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style type="text/css">body,html{height:100%;margin:0;overflow:hidden;padding:0;width:100%}body{background-color:#6495ed}#box{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}#canvas{background:#000}</style></head><body><div id="box"><canvas id="canvas" width="1600" height="1200"></canvas></div><script type="text/javascript">!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=2)}([function(t,e,s){},,function(t,e,s){"use strict";function n(t){return document.querySelector(t)}function i(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}s.r(e);class o{constructor(t){this.attacker=t,this.atk=t.atk,this.x=t.x,this.y=t.y,this.speed=t.speed+6,this.head=t.head}offset(){return{x:Math.cos(this.head*Math.PI/180)*this.speed,y:Math.sin(this.head*Math.PI/180)*this.speed}}}class h{constructor({player:t=null,lv:e=0,speed:s=.5,x:n=0,y:i=0}){this.player=t,this.lv=e;let{hp:o,atk:h,def:a,storage:l,cost:p}=r(this.lv);this.maxHp=o,this.hp=o,this.atk=h,this.def=a,this.storage=l,this.resource=0,this.cost=p,this.x=n,this.y=i,this.head=90,this.speed=s,this.attackable=!0,this.attackDelay=250}upgrade(){if(this.player.token>=this.cost){this.player.token-=this.cost,this.lv++;let{hp:t,atk:e,def:s,storage:n,cost:i}=r(this.lv);return this.maxHp=t,this.atk=e,this.def=s,this.storage=n,this.cost=i,!0}return!1}speedUp(){this.speed<2&&(this.speed+=.05)}speedDown(){this.speed>0&&(this.speed-=.05)}turnLeft(){this.head+=3}turnRight(){this.head-=3}fire(){if(this.attackable)return this.attackable=!1,setTimeout(()=>{this.attackable=!0},this.attackDelay),new o(this)}offset(){return{x:Math.cos(this.head*Math.PI/180)*this.speed,y:Math.sin(this.head*Math.PI/180)*this.speed}}}function r(t=0){return{hp:100+10*t,atk:25+5*t,def:50+20*parseInt(t/5),storage:25+10*parseInt(t/5),cost:100+20*(t+1)+100*parseInt((t+1)/5)}}const a=n("#canvas").getContext("2d"),{width:l,height:p}=n("#canvas");function f({player:t,enemies:e,bullets:s,stones:n}){a.save(),a.fillStyle="#000",a.fillRect(0,0,l,p),a.restore(),function(t){a.save(),a.fillStyle="#333";for(let e=0;e<t.length;e++){const s=i(t[0],t[e]);if(s>400&&Math.random()<(s-400)/200)continue;const n=c(t[e]);a.beginPath(),a.arc(n.x,n.y,100,0,2*Math.PI),a.fill()}a.restore()}(t.ships),function(t){a.save(),a.fillStyle="#ddd",a.lineWidth=4,a.strokeStyle="yellow";for(let e=0;e<t.length;e++){const s=t[e],n=i(t[0],s);if(n>400&&Math.random()<(n-400)/200)continue;const o=c({x:s.x+Math.cos(s.head*Math.PI/180)*s.speed*30,y:s.y+Math.sin(s.head*Math.PI/180)*s.speed*30}),h=c({x:s.x+7.5*Math.cos((s.head+120)*Math.PI/180),y:s.y+7.5*Math.sin((s.head+120)*Math.PI/180)}),r=c({x:s.x+7.5*Math.cos((s.head-120)*Math.PI/180),y:s.y+7.5*Math.sin((s.head-120)*Math.PI/180)});a.beginPath(),a.moveTo(o.x,o.y),a.lineTo(h.x,h.y),a.lineTo(r.x,r.y),a.closePath(),t[e].def>0&&a.stroke(),a.fill()}a.restore()}(t.ships),function(t,e){a.save(),a.fillStyle="red",a.lineWidth=4,a.strokeStyle="orange";for(let s=0;s<e.length;s++){let n=!1;for(let o=0;o<t.length;o++){const h=i(t[0],t[o]);if(!(h>400&&Math.random()<(h-400)/200)&&i(e[s],t[o])<100){n=!0;break}}if(n){const t=c(e[s]);a.beginPath(),a.arc(t.x,t.y,5,0,2*Math.PI),a.fill(),e[s].def>0&&a.stroke(),a.stroke()}}a.restore()}(t.ships,e),function(t,e){a.save(),a.lineWidth=2,a.strokeStyle="white";for(let s=0;s<e.length;s++){let n=!1;for(let o=0;o<t.length;o++){const h=i(t[0],t[o]);if(!(h>400&&Math.random()<(h-400)/200)&&i(e[s],t[o])<100){n=!0;break}}if(n){const t=c(e[s]),n=c({x:e[s].x+10*Math.cos((e[s].head+180)*Math.PI/180),y:e[s].y+10*Math.sin((e[s].head+180)*Math.PI/180)});a.beginPath(),a.moveTo(t.x,t.y),a.lineTo(n.x,n.y),a.stroke()}}a.restore()}(t.ships,s),function(t){a.save(),a.fillStyle="#fff",a.font="36px Arial",a.textBaseline="top",a.textAlign="left",a.fillText("Point: "+t.points,10,10),a.textAlign="right",a.fillText("Token: "+t.token,l-10,10),a.fillText(`Ship: ${t.ships.length} / 10`,l-10,60),a.restore()}(t)}function c({x:t=0,y:e=0}){return{x:t+l/2,y:p/2-e}}function u(...t){return d.play(...t)}const d={volume:.3,sampleRate:44100,x:new(window.AudioContext||webkitAudioContext),play:function(...t){return this.playSamples(this.buildSamples(...t))},playSamples:function(t){const e=this.x.createBuffer(1,t.length,this.sampleRate),s=this.x.createBufferSource();return e.getChannelData(0).set(t),s.buffer=e,s.connect(this.x.destination),s.start(),s},buildSamples:function(t=1,e=.05,s=220,n=0,i=0,o=.1,h=0,r=1,a=0,l=0,p=0,f=0,c=0,u=0,d=0,y=0,g=0,x=1,M=0,k=0){const m=2*Math.PI;let w,b,v=this.sampleRate,P=a*=500*m/v/v,S=s*=(1+2*e*Math.random()-e)*m/v,I=[],T=0,A=0,R=0,D=1,j=0,O=0,C=0;for(l*=500*m/v**3,d*=m/v,p*=m/v,f*=v,c=c*v|0,b=(n=n*v+9)+(M*=v)+(i*=v)+(o*=v)+(g*=v)|0;R<b;I[R++]=C)++O%(100*y|0)||(C=h?h>1?h>2?h>3?Math.sin((T%m)**3):Math.max(Math.min(Math.tan(T),1),-1):1-(2*T/m%2+2)%2:1-4*Math.abs(Math.round(T/m)-T/m):Math.sin(T),C=(c?1-k+k*Math.sin(m*R/c):1)*(C>0?1:-1)*Math.abs(C)**r*t*this.volume*(R<n?R/n:R<n+M?1-(R-n)/M*(1-x):R<n+M+i?x:R<b-g?(b-R-g)/o*x:0),C=g?C/2+(g>R?0:(R<b-g?1:(b-R)/g)*I[R-g|0]/2):C),w=(s+=a+=l)*Math.cos(d*A++),T+=w-w*u*(1-1e9*(Math.sin(R)+1)%2),D&&++D>f&&(s+=p,S+=p,D=0),!c||++j%c||(s=S,a=P,D=D||1);return I},getNote:function(t=0,e=440){return e*2**(t/12)}};var y={fire:function(){u(.5,,2e3,,.05,0,,1.11,-17,,197,.01,,.2,,,,,.16)},saperate:function(){u(1,,18,.01,.01,.21,1,.49,9.9,,,,,,,,.04,.95,.02)},noise:function(t=.4){u(t,,60,,.01,0,4,.55,62,89,-88,.06,,,173,.6,,,.05)},disconnected:function(){u(2.03,,413,,,.24,2,.12,,,,,.11,,317,.1,.13,,,.01)},speed:function(t=200,e=.04){u(e,,t,,.02,.01,,1.72,,-86,118,.03,,,-5.2,,,,.13)},rotate:function(){u(.03,,10,.06,,0,2,2.3,,,621,,,,,,,,.21,.26)}};const g=new class{constructor({name:t="Player"}){this.name=t,this.ships=[new h({player:this})],this.token=200,this.points=0}}({name:"Player"}),x=[],M=[],k=[];function m(t){if(!t.attackable)return;y.fire();const e=t.fire();M.push(e)}var w=function(){return setInterval(()=>{!function(){const t=[],e=g.ships[0].offset();y.speed(400*g.ships[0].speed,.08);for(let s=1;s<g.ships.length;s++){const n=i(g.ships[0],g.ships[s]);if(n>1e3){t.push(s),console.log(`Ship ${s} has disconnected.`),y.disconnected();continue}n>400&&Math.random()>.5&&y.noise((1200-n)/800*.4),y.speed(400*g.ships[s].speed);const o=g.ships[s].offset();g.ships[s].x+=o.x-e.x,g.ships[s].y+=o.y-e.y}for(let e=t.length-1;e>=0;e--)g.ships.splice(t[e],1);const s=[];for(let t=1;t<M.length;t++){if(i(M[t],g.ships[0])>1200){s.push(t);continue}const n=M[t].offset();M[t].x+=n.x-e.x,M[t].y+=n.y-e.y}for(let t=s.length-1;t>=0;t--)M.splice(s[t],1)}(),f({player:g,enemies:x,bullets:M,stones:k})},1e3/30),function(){const t={};window.onkeydown=window.onkeyup=function(e){if("keydown"===e.type?t[e.key]=!0:delete t[e.key],t.c&&function(){if(g.ships.length>=10)return;if(g.token<100)return;g.token-=100,y.saperate();const t=new h({player:g});t.speed=.8*g.ships[0].speed,t.head=g.ships[0].head,g.ships.push(t)}(),t.w||t.ArrowUp)if(t[0])for(let t=0;t<g.ships.length;t++)g.ships[t].speedUp();else{let e=!1;for(let s=1;s<g.ships.length;s++)t[s.toString()]&&(e=!0,g.ships[s].speedUp());e||g.ships[0].speedUp()}if(t.a||t.ArrowLeft)if(y.rotate(),t[0])for(let t=0;t<g.ships.length;t++)g.ships[t].turnLeft();else{let e=!1;for(let s=1;s<g.ships.length;s++)t[s.toString()]&&(e=!0,g.ships[s].turnLeft());e||g.ships[0].turnLeft()}if(t.s||t.ArrowDown)if(t[0])for(let t=0;t<g.ships.length;t++)g.ships[t].speedDown();else{let e=!1;for(let s=1;s<g.ships.length;s++)t[s.toString()]&&(e=!0,g.ships[s].speedDown());e||g.ships[0].speedDown()}if(t.d||t.ArrowRight)if(y.rotate(),t[0])for(let t=0;t<g.ships.length;t++)g.ships[t].turnRight();else{let e=!1;for(let s=1;s<g.ships.length;s++)t[s.toString()]&&(e=!0,g.ships[s].turnRight());e||g.ships[0].turnRight()}if(t[" "])if(t[0])for(let t=0;t<g.ships.length;t++)m(g.ships[t]);else{let e=!1;for(let s=1;s<g.ships.length;s++)t[s.toString()]&&(e=!0,m(g.ships[s]));e||m(g.ships[0])}}}(),{player:g,enemies:x,bullets:M,stones:k}};!async function(t){const e=n("#canvas"),s=n("#box"),i=+getComputedStyle(s).width.replace("px",""),o=+getComputedStyle(s).height.replace("px","");i/o>t?(e.style.height=o+"px",e.style.width=o*t+"px"):(e.style.width=i+"px",e.style.height=i*(1/t)+"px")}(4/3),window.g=w();s(0)}]);</script></body></html>