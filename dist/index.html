<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style type="text/css">body,html{height:100%;margin:0;overflow:hidden;padding:0;width:100%}body{background-color:#6495ed}#box{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}#canvas{background:#000}</style></head><body><div id="box"><canvas id="canvas" width="1600" height="1200"></canvas></div><script type="text/javascript">!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=2)}([function(t,e,s){},,function(t,e,s){"use strict";function i(t){return document.querySelector(t)}function n(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}s.r(e);class h{constructor(t){this.attacker=t,this.atk=t.atk,this.x=t.x,this.y=t.y,this.speed=t.speed+8,this.head=t.head}offset(){return{x:Math.cos(this.head*Math.PI/180)*this.speed,y:Math.sin(this.head*Math.PI/180)*this.speed}}}class o{constructor({player:t=null,lv:e=0,speed:s=.5,x:i=0,y:n=0}){this.player=t,this.lv=e;let{hp:h,atk:o,def:l,storage:a,cost:p}=r(this.lv);this.maxHp=h,this.hp=h,this.atk=o,this.def=l,this.storage=a,this.resource=0,this.cost=p,this.x=i,this.y=n,this.head=90,this.speed=s,this.attackable=!0,this.attackDelay=250}upgrade(){if(this.player.token>=this.cost){this.player.token-=this.cost,this.lv++;let{hp:t,atk:e,def:s,storage:i,cost:n}=r(this.lv);return this.maxHp=t,this.atk=e,this.def=s,this.storage=i,this.cost=n,!0}return!1}speedUp(){this.speed<2&&(this.speed+=.05)}speedDown(){this.speed>0&&(this.speed-=.05)}turnLeft(){this.head+=3}turnRight(){this.head-=3}fire(){if(this.attackable)return this.attackable=!1,setTimeout(()=>{this.attackable=!0},this.attackDelay),new h(this)}offset(){return{x:Math.cos(this.head*Math.PI/180)*this.speed,y:Math.sin(this.head*Math.PI/180)*this.speed}}}function r(t=0){return{hp:100+10*t,atk:25+5*t,def:50+20*parseInt(t/5),storage:25+10*parseInt(t/5),cost:100+20*(t+1)+100*parseInt((t+1)/5)}}const l=i("#canvas").getContext("2d"),{width:a,height:p}=i("#canvas");function f({player:t,enemies:e,bullets:s,stones:i}){l.save(),l.fillStyle="#000",l.fillRect(0,0,a,p),l.restore(),function(t){l.save(),l.fillStyle="#333";for(let e=0;e<t.length;e++){const s=n(t[0],t[e]);if(s>400&&Math.random()<(s-400)/200)continue;const i=c(t[e]);l.beginPath(),l.arc(i.x,i.y,100,0,2*Math.PI),l.fill()}l.restore()}(t.ships),function(t){l.save(),l.fillStyle="#ddd",l.lineWidth=4,l.strokeStyle="yellow";for(let e=0;e<t.length;e++){const s=t[e],i=n(t[0],s);if(i>400&&Math.random()<(i-400)/200)continue;const h=c({x:s.x+Math.cos(s.head*Math.PI/180)*s.speed*30,y:s.y+Math.sin(s.head*Math.PI/180)*s.speed*30}),o=c({x:s.x+7.5*Math.cos((s.head+120)*Math.PI/180),y:s.y+7.5*Math.sin((s.head+120)*Math.PI/180)}),r=c({x:s.x+7.5*Math.cos((s.head-120)*Math.PI/180),y:s.y+7.5*Math.sin((s.head-120)*Math.PI/180)});l.beginPath(),l.moveTo(h.x,h.y),l.lineTo(o.x,o.y),l.lineTo(r.x,r.y),l.closePath(),t[e].def>0&&l.stroke(),l.fill()}l.restore()}(t.ships),function(t,e){l.save(),l.fillStyle="red",l.lineWidth=4,l.strokeStyle="orange";for(let s=0;s<e.length;s++){let i=!1;for(let h=0;h<t.length;h++){const o=n(t[0],t[h]);if(!(o>400&&Math.random()<(o-400)/200)&&n(e[s],t[h])<100){i=!0;break}}if(i){const t=c(e[s]);l.beginPath(),l.arc(t.x,t.y,5,0,2*Math.PI),l.fill(),e[s].def>0&&l.stroke(),l.stroke()}}l.restore()}(t.ships,e),function(t,e){l.save(),l.lineWidth=2,l.strokeStyle="white";for(let s=0;s<e.length;s++){let i=!1;for(let h=0;h<t.length;h++){const o=n(t[0],t[h]);if(!(o>400&&Math.random()<(o-400)/200)&&n(e[s],t[h])<100){i=!0;break}}if(i){const t=c(e[s]),i=c({x:e[s].x+10*Math.cos((e[s].head+180)*Math.PI/180),y:e[s].y+10*Math.sin((e[s].head+180)*Math.PI/180)});l.beginPath(),l.moveTo(t.x,t.y),l.lineTo(i.x,i.y),l.stroke()}}l.restore()}(t.ships,s),function(t){l.save(),l.fillStyle="#fff",l.font="36px Arial",l.textBaseline="top",l.textAlign="left",l.fillText("Point: "+t.points,10,10),l.textAlign="right",l.fillText("Token: "+t.token,a-10,10),l.fillText(`Ship: ${t.ships.length} / 10`,a-10,60),l.restore()}(t)}function c({x:t=0,y:e=0}){return{x:t+a/2,y:p/2-e}}const u=new class{constructor({name:t="Player"}){this.name=t,this.ships=[new o({player:this})],this.token=200,this.points=0}}({name:"Player"}),d=[],y=[],g=[];function x(t){if(!t.attackable)return;const e=t.fire();y.push(e)}var M=function(){return setInterval(()=>{!function(){const t=[],e=u.ships[0].offset();for(let s=1;s<u.ships.length;s++){if(n(u.ships[0],u.ships[s])>1e3){t.push(s),console.log(`Ship ${s} has disconnected.`);continue}const i=u.ships[s].offset();u.ships[s].x+=i.x-e.x,u.ships[s].y+=i.y-e.y}for(let e=t.length-1;e>=0;e--)u.ships.splice(t[e],1);const s=[];for(let t=1;t<y.length;t++){if(n(y[t],u.ships[0])>1200){s.push(t);continue}const i=y[t].offset();y[t].x+=i.x-e.x,y[t].y+=i.y-e.y}for(let t=s.length-1;t>=0;t--)y.splice(s[t],1)}(),f({player:u,enemies:d,bullets:y,stones:g})},1e3/30),function(){const t={};window.onkeydown=window.onkeyup=function(e){if("keydown"===e.type?t[e.key]=!0:delete t[e.key],console.log(t),t.c&&function(){if(u.ships.length>=10)return;if(u.token<100)return;u.token-=100;const t=new o({player:u});t.speed=.8*u.ships[0].speed,t.head=u.ships[0].head,u.ships.push(t)}(),t.w||t.ArrowUp)if(t[0])for(let t=0;t<u.ships.length;t++)u.ships[t].speedUp();else{let e=!1;for(let s=1;s<u.ships.length;s++)t[s.toString()]&&(e=!0,u.ships[s].speedUp());e||u.ships[0].speedUp()}if(t.a||t.ArrowLeft)if(t[0])for(let t=0;t<u.ships.length;t++)u.ships[t].turnLeft();else{let e=!1;for(let s=1;s<u.ships.length;s++)t[s.toString()]&&(e=!0,u.ships[s].turnLeft());e||u.ships[0].turnLeft()}if(t.s||t.ArrowDown)if(t[0])for(let t=0;t<u.ships.length;t++)u.ships[t].speedDown();else{let e=!1;for(let s=1;s<u.ships.length;s++)t[s.toString()]&&(e=!0,u.ships[s].speedDown());e||u.ships[0].speedDown()}if(t.d||t.ArrowRight)if(t[0])for(let t=0;t<u.ships.length;t++)u.ships[t].turnRight();else{let e=!1;for(let s=1;s<u.ships.length;s++)t[s.toString()]&&(e=!0,u.ships[s].turnRight());e||u.ships[0].turnRight()}if(t[" "])if(t[0])for(let t=0;t<u.ships.length;t++)x(u.ships[t]);else{let e=!1;for(let s=1;s<u.ships.length;s++)t[s.toString()]&&(e=!0,x(u.ships[s]));e||x(u.ships[0])}}}(),{player:u,enemies:d,bullets:y,stones:g}};!async function(t){const e=i("#canvas"),s=i("#box"),n=+getComputedStyle(s).width.replace("px",""),h=+getComputedStyle(s).height.replace("px","");n/h>t?(e.style.height=h+"px",e.style.width=h*t+"px"):(e.style.width=n+"px",e.style.height=n*(1/t)+"px")}(4/3),window.g=M();s(0)}]);</script></body></html>